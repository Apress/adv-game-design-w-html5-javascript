<!doctype html>
<meta charset="utf-8">
<title>Filling shapes with images</title>
<script src="../library/plugins/traceur-compiler/bin/traceur.js" type="text/javascript"></script>
<script src="../library/plugins/traceur-compiler/src/bootstrap.js" type="text/javascript"></script>
<script>traceur.options.experimental = true;</script>
<script type="module">

//Create a canvas element and 2D drawing context called "ctx"
let canvas = document.createElement("canvas");
canvas.setAttribute("width", "256");
canvas.setAttribute("height", "256");
canvas.style.border = "1px dashed black";
document.body.appendChild(canvas);
let ctx = canvas.getContext("2d");
  
//Load an image
let catImage = new Image();
catImage.addEventListener("load", loadHandler, false);
catImage.src = "images/cat.png";

//The loadHandler is called when the image has loaded
function loadHandler() {

  //Set the line style options
  ctx.strokeStyle = "black";
  ctx.lineWidth = 3;
  
  //Draw the rectangle
  ctx.beginPath();
  ctx.rect(64, 64, 128, 128);
  
  //Set the pattern to the image, and the fillStyle to the pattern
  let pattern = ctx.createPattern(catImage, "no-repeat");
  ctx.fillStyle = pattern;
  
  //Offset the canvas to match the rectangle's x and y position,
  //then start the image fill from that point
  ctx.save();
  ctx.translate(64, 64);
  ctx.stroke();
  ctx.fill();
  ctx.restore();
}

</script>
